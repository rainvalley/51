C51 COMPILER V9.60.0.0   MAIN                                                              02/16/2020 20:41:24 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include<stc15.h>
   2          typedef unsigned int uint;
   3          typedef unsigned char uchar;
   4          
   5          uchar duty=0;
   6          uchar count=0;
   7          uchar i=0;
   8          
   9          void Delay10ms()                //@11.0592MHz
  10          {
  11   1              unsigned char i, j;
  12   1      
  13   1              i = 108;
  14   1              j = 145;
  15   1              do
  16   1              {
  17   2                      while (--j);
  18   2              } while (--i);
  19   1      }
  20          
  21          void select(uchar channel)
  22          {
  23   1              switch(channel)
  24   1              {
  25   2                      case 4: P2=(P2&0X1F)|0X80;break;
  26   2                      case 5: P2=(P2&0X1F)|0XA0;break;
  27   2                      case 6: P2=(P2&0X1F)|0XC0;break;
  28   2                      case 7: P2=(P2&0X1F)|0XE0;break;
  29   2              }
  30   1      }
  31          
  32          void initsys()
  33          {
  34   1              select(5);
  35   1              P0=0X00;
  36   1              select(4);
  37   1              P0=0XFF;
  38   1      }
  39          
  40          void Timer0Init(void)           //10微秒@11.0592MHz
  41          {
  42   1              AUXR |= 0x80;           //定时器时钟1T模式
  43   1              TMOD &= 0xF0;           //设置定时器模式
  44   1              TL0 = 0x91;             //设置定时初值
  45   1              TH0 = 0xFF;             //设置定时初值
  46   1              TF0 = 0;                //清除TF0标志
  47   1              TR0 = 1;                //定时器0开始计时
  48   1              
  49   1              EA=1;
  50   1              ET0=1;
  51   1      }
  52          
  53          
  54          
C51 COMPILER V9.60.0.0   MAIN                                                              02/16/2020 20:41:24 PAGE 2   

  55          void timerser() interrupt 1
  56          {
  57   1              count++;
  58   1              if(count==duty)
  59   1              {
  60   2                      P0=0Xff<<i;
  61   2              }
  62   1              else if(count==100)
  63   1              {
  64   2                      P0=~(0Xff<<i);
  65   2                      count=0;
  66   2              }
  67   1      }
  68          
  69          
  70          void main()
  71          {
  72   1              initsys();
  73   1              Timer0Init();
  74   1              while(1)
  75   1              {
  76   2                      Delay10ms();
  77   2                      duty=duty+1;
  78   2                      i++;
  79   2                      if(duty==100)
  80   2                      {
  81   3                              duty=0;
  82   3                              i++;
  83   3                      }
  84   2                      if(i==8)
  85   2                      {
  86   3                              i=0;
  87   3                      }
  88   2              }
  89   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    199    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
